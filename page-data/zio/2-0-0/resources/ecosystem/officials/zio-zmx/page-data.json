{"componentChunkName":"component---node-modules-atooni-gatsby-theme-ziodoc-src-components-simple-js","path":"/zio/2-0-0/resources/ecosystem/officials/zio-zmx","result":{"data":{"mdx":{"id":"9ecbc7d2-a6df-5d94-9c33-7a6374ddbbfb","slug":"resources/ecosystem/officials/zio-zmx","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"id\": \"zio-zmx\",\n  \"title\": \"ZIO ZMX\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/zio/zio-zmx\"\n  }, \"ZIO ZMX\"), \" is a monitoring, metrics, and diagnostics toolkit for ZIO applications.\"), mdx(\"h2\", null, \"Introduction\"), mdx(\"p\", null, \"So ZIO ZMX is giving us a straightforward way to understand exactly what is going on in our ZIO application when we deploy that in production.\"), mdx(\"p\", null, \"ZIO ZMX key features:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Easy Setup\"), \" \\u2014 It seamlessly integrates with an existing application. We don't need to change any line of the existing ZIO application, except a few lines of code at the top level.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Diagnostics\"), \" \\u2014  To track the activity of fibers in a ZIP application including fiber lifetimes and reason for termination.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Metrics\"), \" \\u2014 Tracking of user-defined metrics (Counter, Gauge, Histogram, etc.)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Integrations\"), \" \\u2014 Support for major metrics collection services including \", mdx(\"em\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"https://github.com/prometheus/prometheus\"\n  }, \"Prometheus\")), \" and \", mdx(\"em\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"https://github.com/statsd/statsd\"\n  }, \"StatsD\")), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Zero Dependencies\"), \" - No dependencies other than ZIO itself.\")), mdx(\"h2\", null, \"Installation\"), mdx(\"p\", null, \"In order to use this library, we need to add the following line in our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build.sbt\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-scala\"\n  }, \"libraryDependencies += \\\"dev.zio\\\" %% \\\"zio-zmx\\\" % \\\"0.0.6\\\"\\n\")), mdx(\"h2\", null, \"Example\"), mdx(\"p\", null, \"To run this example, we also should add the following dependency in our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build.sbt\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-scala\"\n  }, \"libraryDependencies += \\\"org.polynote\\\" %% \\\"uzhttp\\\" % \\\"0.2.7\\\"\\n\")), mdx(\"p\", null, \"In this example, we expose metric information using \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Prometheus\"), \" protocol:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-scala\"\n  }, \"import uzhttp._\\nimport uzhttp.server.Server\\nimport zio._\\nimport zio.blocking.Blocking\\nimport zio.clock.Clock\\nimport zio.console._\\nimport zio.duration.durationInt\\nimport zio.zmx.metrics._\\nimport zio.zmx.prometheus.PrometheusClient\\n\\nimport java.io.IOException\\nimport java.lang\\nimport java.net.InetSocketAddress\\n\\nobject ZmxSampleApp extends zio.App {\\n\\n  val myApp: ZIO[Console with Clock with Has[PrometheusClient] with Blocking, IOException, Unit] =\\n    for {\\n      server <-\\n        Server\\n          .builder(new InetSocketAddress(\\\"localhost\\\", 8080))\\n          .handleSome { case request if request.uri.getPath == \\\"/\\\" =>\\n            PrometheusClient.snapshot.map(p => Response.plain(p.value))\\n          }\\n          .serve\\n          .use(_.awaitShutdown).fork\\n      program <-\\n        (for {\\n          _ <- (ZIO.sleep(1.seconds) *> request @@ MetricAspect.count(\\\"request_counts\\\")).forever.forkDaemon\\n          _ <- (ZIO.sleep(3.seconds) *>\\n            ZIO.succeed(\\n              lang.Runtime.getRuntime.totalMemory() - lang.Runtime.getRuntime.freeMemory()\\n            ).map(_ / (1024.0 * 1024.0)) @@ MetricAspect.setGauge(\\\"memory_usage\\\")).forever.forkDaemon\\n        } yield ()).fork\\n      _ <- putStrLn(\\\"Press Any Key\\\") *> getStrLn.catchAll(_ => ZIO.none) *> server.interrupt *> program.interrupt\\n    } yield ()\\n\\n  def run(args: List[String]): URIO[ZEnv, ExitCode] =\\n    myApp.provideCustom(PrometheusClient.live).exitCode\\n\\n  private def request: UIO[Unit] = ZIO.unit\\n}\\n\")), mdx(\"p\", null, \"By calling the following API we can access metric information:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"curl -X GET localhost:8080\\n\")), mdx(\"p\", null, \"Now we can config the Prometheus server to scrape metric information periodically.\"), mdx(\"h2\", null, \"Resources\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://www.youtube.com/watch?v=VM_8ByPuAcI\"\n  }, \"ZIO WORLD - ZIO ZMX - Development Testing, Deployment\"), \" by Adam Fraser (May 2021) \\u2014 Adam Fraser went on to present the state of ZMX, showing how metrics Iadded to the runtime system will enable rich real-time analytics out of any ZIO app with zero coding, including fiber lifetimes, fiber failure analysis, fiber counts, & much more (StatsD/Promethus/etc).\")));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"filePath":"/home/runner/work/gatsby-theme-zio/gatsby-theme-zio/example/node_modules/@atooni/zio-core-2/src/docs/resources/ecosystem/officials/zio-zmx.md"}},"staticQueryHashes":[]}